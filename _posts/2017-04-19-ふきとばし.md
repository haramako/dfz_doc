■吹き飛ばし

<http://google.com/>

■吹き飛ばし概要
・距離に応じてモンスターや岩や主人公を吹き飛ばす
・吹き飛ばし距離はスキルによって設定できる
・吹き飛び処理の際には、「水場」「虚空」「溶岩」に侵入できないキャラであってもルールを無視して侵入する
・範囲吹き飛ばしスキルは、手前から順に処理を行う(DFでは奥から行っていた)
　※これにより、スキル使用時には範囲内であっても範囲スキルが当たらない可能性がある

・吹き飛んだキャラが別のキャラにぶつかった場合は、玉突きが発生する
・吹き飛ばし耐性によって、吹き飛ばし距離を縮めたり、完全無効化する事が出来る

・のっぺり壁にぶつかった場合は停止する
　※ただし、壁抜け属性をもったキャラには適用されない
・のっぺり壁の角を抜ける
・ちょこん壁にぶつかった場合は「ヌル滑り」が発生する
　※ただし、壁抜け属性をもったキャラには適用されない
・岩にぶつかった場合は「ヌル滑り」が発生する
・吹き飛ばす事が出来ないキャラにぶつかっても「ヌル滑り」は発生しない

・吹き飛び処理の最終地点が「水場」「虚空」「溶岩」であり、かつその周囲のマスすべてが侵入不可だった場合「池ポチャ」「虚空ポチャ」「溶岩ポチャ」が発生する
　※ただし、飛行属性を持ったキャラには適用されない
　※そうでない場合は最終地点に隣接する侵入可能なマスに強制移動する


■吹き飛ばし耐性
自分が被った「残吹き飛ばし距離」を即座に「1/1+吹き飛ばし耐性の値」に変換できる
1なら半分に、2なら三分の一にする
小数点切り捨て
吹き飛ばしを伴う攻撃のダメージは減少しない

玉突きの際には、この値を考慮する
玉突きされる側が1マス以上吹き飛ぶ事が出来なければ、玉突きは発生しない

吹き飛ばし耐性に99が入力された場合は、一切の吹き飛ばしが無効される(ダメージは無効化されない)

吹き飛ばしが、吹き飛ばし耐性による何かしらの原因で防がれた(1マスも吹き飛べなかった)場合は「ふんばり」表示がされる
※小数点の切り捨てによって発生した場合も同様

主人公であっても同様の処理が行われる

■玉突き
吹き飛んだキャラが別のキャラにぶつかった際に、下記の条件を満たせば発生する押し出し仕様
・玉突きする側が、玉突きされる側のマスに侵入可能
・玉突きされる側が少なくとも1マス吹き飛ばされる事が出来る

玉突きを発生させる際には、残吹き飛ばし距離を無条件で1消費してから、玉突きの処理に入る
※玉突きされる側のマスに侵入するのに残吹き飛ばし距離1を消費するので、2が消費されるはず

玉突きが発生した際には、残吹き飛ばし距離の2/3を玉突きされる側に伝播し、1/3が玉突きする側に残留する※小数点切り捨て

玉突きが発生した際には、玉突きされる側⇒玉突きする側　の順で吹き飛ばし処理が行われる

玉突きは1回の吹き飛ばしで2回以上発生する事もある

何らかの原因で玉突きが行えない場合は、DFのルールと同じくその場で停止する

主人公であっても同様の処理が行われる


■ヌル滑り
残吹き飛ばし距離が1以上残った状態で吹き飛んだ先に「ちょこん壁」「岩」があった場合に発生する滑り現象
壁抜け属性を持ったモンスターには適用されない
向かって斜め左または斜め右のうち、壁、岩、モンスターのいないマスの方向に吹き飛び方向が変更される※どちらも該当する場合はランダム
上記に該当の方向が無い場合は、向かって斜め左または斜め右のうち、モンスターがいるマスの方向に飛び先が変更される※どちらも該当する場合はランダム
上記に該当の方向が無い場合はその場で停止する

ヌル滑り自体によって残吹き飛ばし距離は消費されない※移動自体には発生する

主人公であっても同様の処理が行われる



■池ポチャ
飛行属性を持たないモンスターの吹き飛び処理の最終地点が「水場」だった場合は「池ポチャ」が発生する
主人公であっても同様の処理が行われる

池ポチャした場合は、最終地点にドボンと落ちてしまう
対象が岩だった場合には攻撃で破壊した時と同様の処理が行われる(モンスターの手によって行われていたとしても同様)
最終地点では泡ぶくが表示されており、そこにキャラがいる事が確認できる※ミニマップにもポインターが表示される
同じ地点に2キャラが存在する事は出来ない※後から落ちたキャラは隣の水場マスに移動させられる。隣のマスが無い場合は攻撃で倒した時と同様の処理が行われる※主人公なら死亡する
池ポチャしている最中は、その地点を埋め立てる事は出来ない
3～7ターン(ランダム)後に、その地点から近くの侵入可能な地点に水しぶきを上げて、ピョーンと飛んでくる(泡ぶくの地点から、ジャンプで復帰する流れ)
池ポチャしている間は、一切行動できず、あたり判定も発生しない
池ポチャしている間は、他のモンスターから索敵されない※ただし、索敵属性を持っているモンスターは索敵する

キャラが復帰した地点には、水溜まりの模様がつく
復帰時は、池ポチャ時についていた状態異常はすべて解除される※それ以外は引き継ぐ

復帰したキャラがモンスターなら、下記のどれかの効果が付与された状態となる※耐性を無視する
・HPが池ポチャ時の半分(小数点切り上げ)
・10ターン鈍足
・10ターン混乱
・同じフロアに出現する他のモンスターに変化(HP等は初期状態)

復帰したキャラが主人公なら、下記のどれかの効果が付与された状態となる※耐性を無視する
・HPが池ポチャ時の半分(小数点切り上げ)
・10ターン鈍足
・10ターンブレイブ状態
・アイテムをランダムで1つ失う※装備中のアイテムは失わない

ただし、池ポチャ耐性を持ったキャラだった場合には、上記の処理は行われず、以下の特典が全て付く
・HP完全回復
・10ターン倍速
・装備中の「池ポチャ耐性ファング」を失う※主人公のみ

HPが減ると自ら池ポチャするモンスターもいる

主人公が狙って池ポチャするには、モンスターの協力かスキル効果が必要


■虚空ポチャ
飛行属性を持たないモンスターの吹き飛び処理の最終地点が「虚空」だった場合は「虚空ポチャ」が発生する
主人公であっても同様の処理が行われる

虚空ポチャした場合は、最終地点にヒューンと落ちてしまう
対象が岩だった場合には攻撃で破壊した時と同様の処理が行われる(モンスターの手によって行われていたとしても同様)

最終地点では「ヘルプ！」と表示されており、そこにキャラがいる事が確認できる※ミニマップにもポインターが表示される
最終地点では、虚空ポチャ耐性を持つ場合には、最終地点では「潜伏中！」と表示されており、そこにキャラがいる事が確認できる※ミニマップにもポインターが表示される

同じ地点に2キャラが存在する事は出来ない※後から落ちたキャラは隣の虚空マスに移動させられる。隣のマスが無い場合は攻撃で倒した時と同様の処理が行われる※主人公なら死亡する
虚空ポチャしている最中は、その地点を埋め立てる事は出来ない
3～7ターン(ランダム)後に、その地点から近くの侵入可能な地点ピョーンと飛んでくる(ヘルプの地点から、ジャンプで復帰する流れ)
虚空ポチャしている間は、一切行動できず、あたり判定も発生しない
虚空ポチャしている間は、他のモンスターから索敵されない※ただし、索敵属性を持っているモンスターは索敵する

復帰時は、虚空ポチャ時についていた状態異常はすべて解除される※それ以外は引き継ぐ

復帰したキャラがモンスターなら、下記のどれかの効果が付与された状態となる※耐性を無視する
・HPが虚空ポチャ時の半分(小数点切り上げ)
・10ターン幻覚
・10ターン倍速
・レベルが1段階アップ

復帰したキャラが主人公なら、下記のどれかの効果が付与された状態となる※耐性を無視する
・HPが1
・10ターン倍速
・レベルが1下がる
・アイテムをランダムで1つ失う※装備中のアイテムは失わない

ただし、虚空ポチャ耐性を持ったキャラだった場合には、上記の処理は行われず、以下の特典が全て付く
・HP完全回復
・10ターン倍速
・装備中の「虚空ポチャ耐性ファング」を失う※主人公のみ

主人公が狙って虚空ポチャするには、モンスターの協力かスキル効果が必要



■溶岩ポチャ
飛行属性を持たないモンスターの吹き飛び処理の最終地点が「溶岩」だった場合は「溶岩ポチャ」が発生する
主人公であっても同様の処理が行われる

溶岩ポチャした場合は、最終地点にドボンと溶岩飛沫を上げて落ちてしまう
溶岩ポチャした場合は、「溶岩ポチャ耐性」を持たない限り、即座にで死亡扱いとなる
対象が岩だった場合には攻撃で破壊した時と同様の処理が行われる(モンスターの手によって行われていたとしても同様)

溶岩ポチャ耐性を持つ場合には、最終地点では「潜伏中！」と表示されており、そこにキャラがいる事が確認できる※ミニマップにもポインターが表示される

同じ地点に2キャラが存在する事は出来ない※後から落ちたキャラは隣の溶岩マスに移動させられる。隣のマスが無い場合は攻撃で倒した時と同様の処理が行われる※主人公なら死亡する
溶岩ポチャしている最中は、その地点を埋め立てる事は出来ない
3～7ターン(ランダム)後に、その地点から近くの侵入可能な地点ピョーンと飛んでくる(ヘルプの地点から、ジャンプで復帰する流れ)
溶岩ポチャしている間は、一切行動できず、あたり判定も発生しない
溶岩ポチャしている間は、他のモンスターから索敵されない※ただし、索敵属性を持っているモンスターは索敵する

復帰時は、溶岩ポチャ時についていた状態異常はすべて解除される※それ以外は引き継ぐ

溶岩ポチャしたキャラがモンスターには、下記のどれかの効果が付与された状態となる※耐性を無視する
・HP完全回復
・10ターン倍速
・装備中の「溶岩ポチャ耐性ファング」を失う※主人公のみ

主人公が狙って溶岩ポチャするには、モンスターの協力かスキル効果が必要

■例


![ふき飛ばし例.png](.\images\ふき飛ばし例.png)


主人公が上方向に吹き飛ばし魔法(吹き飛ばし距離10)を放ったとする※①は吹き飛ばし耐性0とする
モンスター①にヒットした時点で、①は「10マス上方向に吹き飛ぶ」状態となる
①はaのマスまで吹き飛んだ時点で「残り9マス上方向に吹き飛ぶ」状態になっている(これを残吹き飛び9と呼ぶ)
次に①が吹き飛ぶべきマスは②のいるマスだが、すでに②が占有しているため、①は侵入できないはず※DFでの処理ではそうだった
ここで、②が吹き飛ぶスペースがあるかどうかを判定する
ｂのスペースがあるため「②は吹き飛ぶ事が出来る」と判定
ここで、①は②を玉突きするだけの残吹き飛ばし距離を保有しているかを判定する
必要な残吹き飛ばし距離は
・②がいるマスに侵入するために必要な残吹き飛ばし距離1
・②を少なくとも1マス吹き飛ばすための残吹き飛ばし距離1※ここでは②の吹き飛ばし耐性を0とする
・玉突き時に消費する税の値※ここでは1とする
・吹き飛ばし耐性の値差により補正値※ここでは両者が吹き飛ばし耐性0のため、発生しない
(ここでは合計3)
①の残吹き飛ばし距離は9のため、玉突きを発生させる事が出来る
①は②のいるマスに侵入し、残吹き飛ばし距離1を消費する(残吹き飛ばし距離8)
玉突きを発生させるために、玉突き税である1を消費する(残吹き飛ばし距離7)
②に残りの吹き飛ばし距離を伝播する
残吹き飛ばし距離の2/3を②に伝播し、1/3が①に残留する※小数点切り捨て
②には残吹き飛ばし距離4が伝播する
①は残吹き飛ばし距離2が残留している

②の吹き飛ばしが開始される(残吹き飛ばし距離4）
通常のルール通り、ｃの地点まで吹き飛ぶ

①の吹き飛びが、もともと②のいた場所から再開される(残り吹き飛ばし距離2）
通常のルール通り、dの地点まで吹き飛ぶ
